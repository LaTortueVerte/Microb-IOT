INSERT INTO `users` (`user_ID`, `user_email`, `user_name`, `user_pwd`, `user_role`) VALUES ('1', 'robin@efrei.net', 'robin', 'robin', '0');
INSERT INTO `component_catalogue` (`component_catalogue_ID`, `component_catalogue_name`, `component_catalogue_role`) VALUES ('1', 'Ventilateur3000', '1'); -- composant ventilateur
INSERT INTO `component_catalogue` (`component_catalogue_ID`, `component_catalogue_name`, `component_catalogue_role`) VALUES (NULL, 'TemperatureSeter3000', '0'); -- composant thermometre
INSERT INTO `component_catalogue` (`component_catalogue_ID`, `component_catalogue_name`, `component_catalogue_role`) VALUES (NULL, 'Pompe3000', '1'); -- composant pompe
INSERT INTO `modules` (`module_ID`, `module_role`, `module_name`) VALUES ('1', '0', 'qualité d\'aire'), (NULL, '0', 'dégât des eaux'), (NULL, '0', 'incendie');
INSERT INTO `belongs` (`belong_ID`, `user_ID`, `module_ID`) VALUES ('1', '1', '1'), (NULL, '1', '2'), (NULL, '1', '3');


-- -------------------- read --------------------


-- données concernant le ventilateur

INSERT INTO `component` (`component_ID`, `module_ID`, `component_catalogue_ID`) VALUES ('1', 1, 1);
INSERT INTO `data_component` (`data_ID`, `data_valeur`, `component_ID`, `data_variable`) VALUES ('1', '90', '1', 'Puissance');
INSERT INTO `data_component` (`data_ID`, `data_valeur`, `component_ID`, `data_variable`) VALUES (NULL, '1', '1', 'Etat');

-- puissance du ventilateur
select dc.data_valeur from data_component dc 
inner join component c
	on dc.component_ID = c.component_ID 
inner join modules m
	on c.module_ID = m.module_ID
inner join belongs b
	on m.module_ID = b.module_ID
inner join users u
	on b.user_ID = u.user_ID
where data_variable = 'Puissance_ventilateur';

-- etat du ventilateur
select dc.data_valeur from data_component dc 
inner join component c
	on dc.component_ID = c.component_ID 
inner join modules m
	on c.module_ID = m.module_ID
inner join belongs b
	on m.module_ID = b.module_ID
inner join users u
	on b.user_ID = u.user_ID
where data_variable = 'Etat_ventilateur';



-- données concernant le thermomètre

INSERT INTO `component` (`component_ID`, `module_ID`, `component_catalogue_ID`) VALUES (NULL, '1', '2');
INSERT INTO `data_component` (`data_ID`, `data_valeur`, `component_ID`, `data_variable`) VALUES (NULL, '18', '2', 'temperature_min'), (NULL, '24', '2', 'temperature_max');

-- temperature min
select dc.data_valeur from data_component dc 
inner join component c
	on dc.component_ID = c.component_ID 
inner join modules m
	on c.module_ID = m.module_ID
inner join belongs b
	on m.module_ID = b.module_ID
inner join users u
	on b.user_ID = u.user_ID
where data_variable = 'temperature_min';

-- temperature max
select dc.data_valeur from data_component dc 
inner join component c
	on dc.component_ID = c.component_ID 
inner join modules m
	on c.module_ID = m.module_ID
inner join belongs b
	on m.module_ID = b.module_ID
inner join users u
	on b.user_ID = u.user_ID
where data_variable = 'temperature_max';


-- données concernant la pompe à eau

INSERT INTO `component` (`component_ID`, `module_ID`, `component_catalogue_ID`) VALUES (NULL, '2', '3');
INSERT INTO `data_component` (`data_ID`, `data_valeur`, `component_ID`, `data_variable`) VALUES (NULL, '1', '3', 'Etat_pompe');

-- etat de la pompe
select dc.data_valeur from data_component dc 
inner join component c
	on dc.component_ID = c.component_ID 
inner join modules m
	on c.module_ID = m.module_ID
inner join belongs b
	on m.module_ID = b.module_ID
inner join users u
	on b.user_ID = u.user_ID
where data_variable = 'Etat_pompe';

----------------------- update --------------------

UPDATE data_component dc
inner join component c
	on dc.component_ID = c.component_ID 
inner join modules m
	on c.module_ID = m.module_ID
inner join belongs b
	on m.module_ID = b.module_ID
inner join users u
	on b.user_ID = u.user_ID     
set  data_valeur = NOT data_valeur
WHERE data_variable = 'Etat_ventilateur';
